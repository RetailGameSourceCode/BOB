** bubble generator*bubblegen:	lda	#1	sta	PICscroll,x		lda	bubblecount	beq	@start	rtl@start:	lda	#type_walk	jsl	TSKschedule	dw	risingbubble	bcc	@noroom	jsl	copytask		inc	bubblecount@noroom:	rtl		** the rising bubble*risingbubble:	lda	#type_bubble	sta	PICtype,x		lda	#2	sta	PICbank,x		lda	#1	sta	PICscroll,x	sta	PICprior,x		lda	#5	sta	PICcolor,x	jsl	PICput	dw	rem15	jsl	TSKsuspend** bubble collision and off screen death...*	lda	#0					ldy	#-48	jsl	bgcoll_long	jsl	findwall_long	bcs	@killbubble	lda	#16					ldy	#0	jsl	bgcoll_long	jsl	findwall_long	bcs	@killbubble	lda	#-16				ldy	#0	jsl	bgcoll_long	jsl	findwall_long	bcs	@killbubble	lda	PICyhi,x	cmp	#-1	bne	@alive@killbubble:	lda	status	cmp	#ridebubble	bne	@notriding	lda	#1	sta	jumpyspeed	lda	#falling			sta	status	stz	fallcount@notriding:	lda	#0	sta	bubblecount	jmp	TSKcancel** process bubble dynamics*@alive:	lda	status	cmp	#ridebubble	bne	@noton	cpx	whichbubble	bne	@noton	lda	PICxlo,x	cmp	#128	beq	@rideup	bcc	@low@high:	jsl	PICxdec	bra	@rideup@low:	jsl	PICxinc@rideup:	stz	PICscroll,x	rtl	@noton:	jsl	PICydec	rtl	** dropping platform*droppingplatform:	lda	#0	sta	PICdir,x	sta	PICdirv,x			lda	#type_platform2	sta	PICtype,x		lda	#13	sta	PICbank,x		lda	#5	sta	PICcolor,x	jsl	PICput	dw	platformframe	lda	#2	sta	PICscroll,x	** process dropping platform dynamics*	jsl	TSKsuspend	lda	#2	sta	PICscroll,x	lda	#0	ldy	#16	jsl	bgcoll_long	jsl	findwall_long		bcc	@fine	lda	#0	jmp	explode@fine:	cpx	whichplatform	bne	@move	stz	PICscroll,x	rtl@move:	lda	PICstatus,x	beq	@platover	lda	#4	jsl	PICyadd@platover:	rtl ** horizontal platform*vertplatform:	lda	#0	sta	PICdir,x		lda	#2	sta	PICdirv,x		bra	aplatform	horizplatform:	lda	#2	sta	PICdir,x		lda	#0	sta	PICdirv,x	aplatform:	lda	#type_platform	sta	PICtype,x		lda	#13	sta	PICbank,x		lda	#1	sta	PICscroll,x		lda	#5	sta	PICcolor,x	jsl	PICput	dw	platformframe	lda	#30	sta	PICanim,x	** process moving platform dynamics*	jsl	TSKsuspend	cpx	whichplatform	beq	@platover	@move:	lda	PICanim,x		;move platform horizontally	inc	a	cmp	#60	bcc	@fine	lda	PICdir,x	eor	#255	inc	a	sta	PICdir,x	lda	PICdirv,x	eor	#255	inc	a	sta	PICdirv,x	lda	#0@fine:	sta	PICanim,x	lda	PICdir,x	jsl	PICxadd			lda	PICdirv,x	jsl	PICyadd		lda	#1	sta	PICscroll,x@platover:	rtl** ultra force wind generator*windgenerator:	lda	#type_generic	sta	PICtype,x		lda	#1	sta	PICscroll,x	lda	#13	sta	PICbank,x		jsl	PICput	dw	platformframe		jsl	TSKsuspend		lda	PICxhi,x	ora	PICyhi,x	bne	@missed		lda	PICxlo,x	cmp	#128-16	bcc	@missed	cmp	#128+16		bcs	@missed		lda	PICylo,x	cmp	#Centrey-16	bcc	@missed	cmp	#Centrey+16	bcs	@missed		lda	PIClogic,x	sta	blowdir	beq	@juststat	cmp	#3	beq	@juststat	cmp	#1	beq	@makeright@makeleft:	lda	#faceright	bra	@setdir@makeright:	lda	#faceleft@setdir:	sta	walkdir@juststat	lda	#windblown	sta	status@missed:	rtl** frames*platformframe: dc.b $02 dc.b $80,$82+6,$AC dc.b $D0,$82+6,$AA	