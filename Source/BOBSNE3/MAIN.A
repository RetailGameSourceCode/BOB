		65816		Globalize			** Ultra force data includes*;	include	sfxMacros.h		;SET8/SET16	include	equates.h		;game equates;	include	sfxequates.asm	;sound effect equates	include	data.a		;game data	SFXorg	0,$8000					** Code starts right here.. *Start	proc	sei				;don't allow interrupts	clc				;clear carry flag	xce				;exchange carry with emulation bit (Native mode set)	SET8				;set Accumulator and Index registers to 8 bits	SET8		SET16	lda	#$1fe	tcs		SET8		jsr	initmusic	lda	#0	sta	APU_PORT0	** Set up system stuff*	jsr	ZeroRam	jsl	RegisterClear		;init system registers	jsr	SetUpObjects		;set up sprites	jsr	SetUpBackgrounds		;set up background mode		lda	#Inc1X1+IncHi		;vram increment mode	sta	VMAINC	jsr	clearscreens	jsr	loadgraymatter	jsl	restartgame			;restart level			lda	RDNMI			;acknowlodge nmi		lda	#%10100001		;vblank on/v-irq on/joy on	sta	NMITIMEN	lda	#WINDOWTOP		;control panel interrupt	sta	VTIMEL	stz	IRQnum		lda	#%00000000		;224 scan lines	sta	SETINI			stz	windowflag	lda	#WINDOWTOP	sta	windowon		cli				;and re-enable interrupts	** outside loop - select level*	lda	#theme			;play music		sta	APU_PORT0			stz	winflag		;no winners or losers yet	stz	winflag2			stz	mapnumber		;current map...	stz	maptype	stz	world	stz	level	stz	mapsequence	stz	demolevel	stz	threeseconds	stz	bugfix	stz	enterpassword	stz	lockscreen	lda	#-1	sta	currentmusic	sta	sgivepassword		stz	bossbehind		stz	realcomboframe	;game passwords	stz	realcomboframe+1	stz	realcomboframe+2	stz	realcomboframe+3	stz	realcomboframe+4	stz	realcomboframe+5	stz	gotocontinue	stz	dancetype		stz	weapon	lda	#3	sta	remote		stz	staticintro	stz	funnyhead		stz	bobpointer	stz	gettitlemusic	stz	startblowing		stz	volumedir	lda	#$ff	sta	volume;	jsl	soundeffects** loop point*resetloop	jsr	Zero2				;only zero a little bit...	jsr	clearscreens		lda	#ForcedBlankOn			sta	INIDISP		lda	#BG1MainOff+BG2MainOff+BG3MainOff+ObjMainOff	sta	TM	 			jsl	TSKinit			;remove all tasks	lda	#0	jsl	init_tasktable		lda	#0	jsl	inittaskmap		jsl	restartgame			;restart level		stz	countdown	stz	firsttime			;idiot clears	stz	bobready	stz	dontallow	stz	happened	stz	vbip	stz 	taskalt	stz 	vblankcount	stz 	alternate	stz	techdmacount		stz	screenstate			stz	invenreturn	stz	invengoto	stz	firsttime	stz	gamestart	stz	fade	stz	xmosaic	stz	pauseflag	stz	panelline	stz	takeoff		stz 	sdmacount** select a level or carry on*	lda	demoflag		;carry on if not in demo mode	beq	@trywin	lda	demolevel		;if won first level	bne	@pickalevel@trywin:	lda	winflag2	beq	@pickalevel	bpl	@lost	@won:	lda	#type_bob		;next level - goto initleve l	jsl	TSKschedule		;for worldmap and teleport	dw	mapselect	jmp	wait	@lost:	stz	passwordcheat	jsl	startgamestuff		lda	#type_bob		;redo this level	jsl	TSKschedule	dw	loadbobtask		lda	#type_bob	jsl	TSKschedule	dw	weapondribble	jmp	wait	@pickalevel:	stz	democount	stz	demoflag	stz	demoticks	stz	winflag	stz	winflag2	stz	mapsequence	jsl	clearscore	jsl	startgamestuff		lda	#2			;5 for adam	sta	lives	lda	#1	sta	dontallow		stz	mapnumber		;current map...	stz	maptype	stz	gamestart		jsl	TSKinit		lda	#type_bob		;select a map	jsl	TSKschedule	dw	mapselect	jmp	wait2	** main wait loop...*wait:	lda	#1			;no vblank interruption	sta	dontallow	inc	cputime	lda	pauseflag		;bug fix	bne	@notdeadyet		lda	winflag		;was game terminated?	beq	@notdeadyet	cmp	#-1	beq	@luger	** game over process*@winer:	cmp	#1	beq	@overandout	cmp	#10	bne	@carryon	jsr	dofadeout	lda	winflag@carryon:	dec	a	sta	winflag	bra	@notdeadyet	@overandout:	lda	fade			;wait for screen to fade away	bne	@notdeadyet	stz	winflag		;process win	dec	winflag2	jmp	resetloop@luger:	lda	fade	bne	@notdeadyet	stz	winflag		;process loss	lda	demoflag	beq	@notademo	lda	#1	sta	gettitlemusic	bra	@gameover@notademo:	lda	lives	bne	@notgameover	lda	#1	sta	gotocontinue	bra	@gameover@notgameover:	dec	lives	inc	winflag2@gameover:	stz	demoflag	jmp	resetloop** no...continue with task scheduler and stuff*@notdeadyet:	lda 	alternate		;which of 2 halfs...	eor 	#1	sta 	alternate		lda	pauseflag	bne	@dopicpost		;60 frames a second for inv scr...	lda 	alternate	and 	#1	bne 	@dopicpost		@doall:	jsr	readjoystick	;get hardware data	jsr	TSKhandler		;execute tasks	lda	status		;smooth when in spaceship	cmp	#onworld	beq	@do60hertz	lda	lockscreen	beq	@nopicpost@do60hertz:	jsl	picpost	bra	wait2@nopicpost:	jsl 	movepics		;stupid picpost update	bra	wait2@dopicpost:	jsr	readjoystick	jsr	TSKhandler	lda	pauseflag	bne	@nosync	jsr	syncsprites		;sync all tasks with scroll this cycle@nosync:	jsl	picpostwait2:	stz	happened	stz	dontallow@wait:	lda	happened		;wait for vblank to do its bit	beq	@wait	jmp	wait			;and start again	** Include files needed*	include	sfxStartup.a	;super famincom start code		include	vblank.a		;vblank draw routine		include	sprites.a		;build sprite stuff		include	ninsys.a		;taskhandler 		include	initlevel.a		;level init stuff		include	bob.a			;main bob code	include	draw.a		;draw bob...		include	bobcoll.a		;collision/alignment		include	weapons.a		;weapons		include	scroll.a		;scrolling+music.asm	include	sprcol.asm		;sprite collide for bullets+bghit.a	endofbank0:** Vector Addresses*        org     $7FE4NCOPVector       dw	VBlankNBRKVector       dw	VBlankNABTVector       dw	VBlankNNMIVector       dw	VBlankNRSTVector       dw	VBlankNIRQVector       dw	IRQblank        org     $7FF4COPVector       dw	VBlankBRKVector       dw	VBlankABTVector       dw	VBlankNMIVector       dw	VBlankRSTVector       dw	StartIRQVector       dw	IRQblank** other banks*		SFXorg	$1,$8000	bobchr_head:	include	headchr1.asm	;bob's headbobchr_head2:	include	deathobj0.asm	;dying bob		include	panelchr.asm	;control panel characters+remframes.a						;+remobj for textintroblocks:	include	introblk.asp	eintroblocks:introscr3:	include	intrscr3.asp	;intro screen 3eintroscr3:ultrapara:	include	ultrapar.asp	;ultra force parallaxeultrapara:	include	generate.a		;start offscreen stuff+collide.a+title eye task	ancientmap7:	include	anc007.asp	;vertical challengeeancientmap7:	endofbank1:	SFXorg	2,$8000bobchr_torso:	include	torschr2.asm	;torsobobchr_torso2:	include	deathobj1.asm	;dying bob	include	hdma.a		;hmda code+crushing walls	ancpara:	include	ancpara.asp		;world 2 parallaxeancpara:worldpara:	include	worpara.aspeworldpara:ancientmap5:	include	anc005.asp	eancientmap5:endofbank2:			SFXorg	3,$8000		borgchar:	include	borg1chr.asp	;borg bg characters compressedeborgchar:borgmap1:	include	borg001.asp		;storage baseeborgmap1:	borgblocks:	include	borg1blk.asp	;background blockseborgblocks:bugblocks:	include	bug1blk.asp		;bug blocksebugblocks:	include	passprite.asm	;password sprite sets+ultraforce anim+endscr	bugmap11:	include	bug011.asp			;bug chambersebugmap11:endofbank3:			SFXorg	4,$8000			include	borgsfr0.asm	;borg frames file 		include	bug1sfr0.asm	;bug frames file #1borgmap2:	include	borg003.asp		;borg outposteborgmap2:elevobj0:;	include	elevobj0.asm	;elevator		include	weapfr.a		;bob weapon frames+scooter+passwords+						;world 3 borg animation + virus boss frames	bubblocks:	include	bub1blk.asp	ebubblocks:	include	credit.asm		;credit screenspopeyebossmap:	include	ancboss.asp		;popeye bossepopeyebossmap:virusobj:	include	vrs1obj0.aspevirusobj:borgchar2:	include	borg5chr.asp		;alternative borg seteborgchar2:endofbank4:			SFXorg	5,$8000	include	headsfr1.asm	;bob pieces		include	legssfr3.asm	include	torssfr2.asm	include	bframes.asm		;bob's big frames+deathfr.asm	bobchar:	include	mainobj0.asp	;main bob spritesebobchar:bobchr_legs:	include	legsobj3.asm	;legsbobchr_legs2:	include	deathobj2.asm	;dying bob		bugmap13:	include	bug013.asp		;queen lair	ebugmap13:borgmap17:	include	borg017.asp			;decisionseborgmap17:endofbank5:		SFXorg	6,$8000		bugchar:	include	bug1chr.asp		;bug charactersebugchar:queenchar:	include	queenchr.asm	;queen bug extra bg chars	include	sprpal.asm		;all the sprite palletes	int3char:	include	int3chr.asm		;screen 3 starfield+msxfr0.asm(bullets)endofbank6:			SFXorg	7,$8000	include	borg.a		;enemy code		include	walls.asm		;crushing walls+frames+characters						;plus inventaskendofbank7:		SFXorg	8,$8000	include	bobpieces.asm	;body combo.sss - with initfr.asmancientobj:	include	drudobj0.asp		;ancient spriteseancientobj:scootchars:	include	scooobj0.asp	;scooter stuffescootchars:	include	bgpal.asm		;all the background palletes	world2sprchar:	include	wor1obj1.aspeworld2sprchar:endofbank8:		SFXorg	9,$8000queenmap:	include	queen.aspequeenmap:lavachar:	include	lava1chr.aspelavachar:lavablocks:	include	lavablk.aspelavablocks:	worldchar:	include	worldchr.aspeworldchar:endofbank9:		SFXorg	10,$8000	include	worldbob.asm	;bob on world map initpanelmap:	include	panel.asp		;control panelepanelmap:borgpara:		include	paramap.asp		;borg parallaxeborgpara:mutoidmap:	include	mutoid.asp		;gangly mutoid manemutoidmap: 	include	bodysfr0.asm		;ultra force body frames +screen lifter boss	planetobj:	include	planobj0.asm	;planet attack objects+shadobj0.asm						;+cstrip.asm+fatheadobj:;;;	include	fheadobj.asp		;new ancient fat head bossefatheadobj:virusdeathobj:	include	vdieobj0.asm		;virus boss final death obj set		include	vdiesfr0.asm	;virus boss death framesmouthobj:		;ancient mouth boss obj	include	moutobj0.aspemouthobj:	include	moutsfr0.asm		;ancient mouth boss frames	deathbossobj:		;death boss obj	include	deth1obj.aspedeathbossobj:endofbank10:		SFXorg	11,$8000	include	dead1sf0.asm	;death boss frames	include	bsnakechr.asm	;+buglava.asm+virus bg chars+ingame talkingborgpara3:	include	borgpar4.asp	;borg 4 parallaxeborgpara3:ancientblocks:	include	anci2blk.asp	;world 2 blockseancientblocks:mutoidobj:			include	skulobj0.asp	;compressed mutoid skeleton boss objemutoidobj:ultramap1:	include	ultra001.asp	;ultra force mapeultramap1:ultramap4:			include ultra004.asp	;ultra 4 of 5eultramap4:	logosprobj:	include	titlobj0.aspelogosprobj:introscr2:	include	intrscr2.asp	;intro screen 2eintroscr2:endofbank11:		SFXorg	12,$8000lavamap99:	include	lava099.asp		;lava 99elavamap99:bugobj:	include	bug1obj0.asp		;bug spritesebugobj:	include	bigships.asm		;bigship masp+virusbgscreen+anim borg zap							;+ scooter minebodyobj:	include	bodyobj0.asp		;ultra force body spritesebodyobj:borgmap23:	include	borg023.asp			;borg towereborgmap23:bubbleobj:	include	bubbobj.asm			;rising u.f bubble	borgpara2:	include	borgpar2.asp	;2nd borg paralaxeborgpara2:pussbossmap:	include	pussboss.asp	;puss bossepussbossmap:bugmap2:		include	bug002.asp		;bug mapebugmap2:iconchar:	include	iconchr.asp		;inventory icon characterseiconchar:bugmap26:	include	bug026.asp	ebugmap26:	include	queesfr0.asm	;queen bug frames		endofbank12:		SFXorg	13,$8000	include	picpost.a		include	intro.asm		;introduction code+borg zap gates+buildinv.asm		include	remotes.a		;cute little remotes+teleport swirl+bobdieframes	include	platforms.a		;stand on sprite routine...		include	restart.a		;level/game reset+demotable+wind generator frames		include	bug2sfr0.asm	;bug set #2bubchar:	include	bub1chr.aspebubchar:endofbank13:		SFXorg	14,$8000virus2obj:	include	vrs2obj0.asm	;virus boss grows big stage 2virus3obj:	include	vrs3obj0.asm	;virus boss remaining big bitshoveobj:		include	hoveobj0.asm	;hovering zapper obj;	include	hovesfr0.asm	;hovering zapper frames	:;	include	snaksfr0.asm	;borg boss snakehead frames + hovesfr0		borgbullet1obj:				;borg bullets and frames	include	bw01obj0.asmborgbullet2obj:	include	bw02obj0.asm;	include	bw01sfr0.asm	;+ bw02 weapons frames;;;	include	bw02sfr0.asm	;borg bullet frames		;	include	skulobj0.asm	;mutoid skeleton boss obj;	include	skulsfr0.asm	;mutoid skeleton boss frames		fourwayobj:	include	4wayobj0.asm	 ;4 way turret;	include	4waysfr0.asm	;anim;	include	gdorsfr0.asm	;door lifter;this is the frame file for this bank!!!	include	bank14frames.a	;door lifter+mutoid men+4way frames+snake boss						; and bubbleman too	bubpara:	include	bubpara.asp		ebubpara:doorparallax:	include	doorscr.asp			;door lifter parallaxedoorparallax:lavamap66:	include	lava066.asp		;lava 66elavamap66endofbank14:		SFXorg	15,$8000	queenobj:	include	queeobj0.asp	;queen boss sprites	equeenobj:bugmap7:	include	bug007.asp		;bug mapebugmap7:borgmap6:	include	borg006.asp		;borgeborgmap6:	include	weapobj0.asm	;wobj0->wobj4+ iconfr.asmancientboss:	include	podboss.asp		;flower child bosseancientboss:borgmap31:			include borg031.asp	;3rd scooter rideeborgmap31:scootmap2:			include borg089.asp	;2nd scooter rideescootmap2:intromap2			include introm2.asp	;intro between 1 and 2eintromap2:intromap3:			include introm3.asp	;intro between 2 and 3eintromap3:borgblocks3:			include borg4blk.asp	;world 3 blockseborgblocks3:bugpara:		include	bugpara.asp		;bug parallelebugpara:ultramap2:	include	ultra002.aspeultramap2:endofbank15:		SFXorg	16,$8000		include	control.a		;control panel+ultraforce animationborgmap11:	include	borg011.asp		;ladder maniaeborgmap11:borgmap20:	include	borg020.asp		;lifter bosseborgmap20:borgmap12:	include	borg012.asp		;house o beefeborgmap12:borgmap13:	include	borg013.asp		;borg elevator dropeborgmap13:borgmap7:	include	borg007.asp		;steppy oneeborgmap7:intromap:	include	intromap.aspeintromap:screenlifterobj:	include	door2obj.asp		;screen lifter boss spritesescreenlifterobj:	borgmap32:	include	borg032.asp		;borg map 32   eborgmap32:cadobj:	include	caddobj0.asp		;caddilac introecadobj:borgobj:	include	borgobj0.asp		;borg bad spriteseborgobj:scootmap:	include	borg008.asp		;borg scoot mapescootmap:endofbank16:	SFXorg	17,$8000logochar:	include	logochr.aspelogochar:chevobj:	include	chevobj0.aspechevobj:introobj:	include	introbj0.aspeintroobj:	include	xp01sfr0.asm	;big explosion frames - now has all	ultrachar:	include	ultrachr.asp	;ultra force character seteultrachar:doorblocks:	include	doorblk.asp		;screen lifteredoorblocks:	endofbank17:	SFXOrg	18,$8000	ancientchars:	include	anci2chr.asp		;world 2 ancient charseancientchars:bubblemap3:	include	bub003.asp		;last of the bubble mapsebubblemap3:ancientmap8:	include	anc008.asp		eancientmap8:vettobj	include	vettobj0.asp		;corvette introevettobj:borgblocks2:	include	borg5blk.asp		;new borg stuffeborgblocks2:worldblocks:	include	worldblk.aspeworldblocks:invenchar:	include	invenchr.asp	;inventory screen chars/palleteseinvenchar:	endofbank18:	SFXOrg	19,$8000		include ancframes.a		;most of the anceint frames (commented out!); 			ancient & lava level enemy stuffghosobj0:;	include	ghosobj0.asm	;ghost sprite data;	include	ghossfr0.asm	;ghost framesshakobj0:	include	statobj0.asm	;shaker statue sprite data;	include	statsfr0.asm	;shaker framesimpsobj0:	include	impsobj0.asm	;fire imp sprite data	;	include	impssfr0.asm	;imp frameshandobj0:;	include	handobj0.asm	;screaming hand sprite data;	include 	handsfr0.asm	;screaming hand framesheadobj0:	include	headobj0.asm	;crushing skull sprite data;	include 	headsfr0.asm	;crushing head framesballobj0:	include	ballobj0.asm	;giant sphere sprite data	include	torcsfr0.asm	; flame death hframes+spatsfr0.asm+gasjsfr0+nuke bubmap1:	include	bub001.aspebubmap1:borgchar3:	include	borg4chr.asp	;world 3 borg chareborgchar3:logoscreen:	include	titlescr.asp	elogoscreen:lavamap1:	include	lava001.asp		;first lava mapelavamap1:itemobj:	include	itemobj.asm		;pickup itemsendofbank19:			SFXOrg	20,$8000	introchar:	include	introchr.aspeintrochar:lavaobj:	include	lavaobj0.asp		;lava spriteselavaobj:creditchar:	include	credichr.aspecreditchar:ancientmap2:	include	anc002.asp			;ancient 2eancientmap2:		include	worldmaps.asm		;world001,002,003.asp	borgsnake:	include	snakboss.asp		;borg snake bosseborgsnake:invenmap:	include	invenscr.asp	;invenmap 32x30 inventory screeneinvenmap:endofbank20:	SFXOrg	21,$8000ancientmap3:	include	anc003.asp			;ancient pyramideancientmap3:pussmanobj:;;;;	include	pussobj0.asp		;compressed pussman boss object setepussmanobj:doorchar:	include	doorchr.asp		;door lifter character setedoorchar:	lavabossobj:	include	lmanobj0.asp	;lava boss objelavabossobj:	borgmap33:	include	borg033.asp		;borg next to lasteborgmap33:worldsprchar:	include	wor1obj0.aspeworldsprchar:snakeobj:	include	snakobj0.asp	;borg boss snakehead spritesesnakeobjendofbank21:	SFXOrg	22,$8000		include	tasklist.asm	;task types/ranges...+ spritedma	borgmap4:	include	borg004.aspeborgmap4:	include	clearscr.asm	;clear screen + borgmap35 -scooter 4						; and dad1obj0ancanim1:	include	ancanm.asm	;ancient animation+firelava (groundlava.asm)+queennanim	ultrabossmap:	include	ultrboss.asp	;final bosseultrabossmap:bubblemap2:	include	bub002.asp	;2nd of the bicksters treesebubblemap2:ultrablocks:	include	ultrablk.asp	;ultra force block seteultrablocks:endofbank22:	SFXOrg	23,$8000ROMADRS:				bload sound.bin	endofbank23:	SFXOrg	24,$8000		include 	jungleframes.a		;following jungel frames in one file+pussfr							;+bob 'chjungobj:	include	jungobj0.asp	;main jungle obj setejungobj:ultramap3:	include	ultra003.aspeultramap3:ultramap5:	include	ultra005.asp	;adameultramap5ancientmap6:	include	anc006.asp	;huge planet landeancientmap6:borgmap34	include	borg034.asp			;last borgeborgmap34:lavapar:	include	lavapar.asp			;lava parallaxelavapar:	include	graychar.asm		;gray matter logo+frameslavaboss:	include	lavaboss.asp	;lava bosselavaboss:endofbank24:** reserved for music*	SFXOrg	25,$8000ROMADRS2:	bload borgwave.bin		;borgendofbank25:	SFXOrg	26,$8000endofbank26:	SFXOrg	27,$8000ROMADRS4:	bload tmplwave.bin		;ancient/lava/bubbleendofbank27:	SFXOrg	28,$8000endofbank28:	SFXOrg	29,$8000ROMADRS3:	bload bugwave.bin			;bug/ultraendofbank29:	SFXOrg	30,$8000endofbank30:	SFXOrg	31,$8000rezobj0:					;moved from page 23	include	rezobj.asm		;rez-in characters+textobjendofbank31:				;bank is fucked** Save the assembled code*;	bsave  	0,$100000,"bob"	SFXbsave	Start,endofbank31,"bob"	svsyms	bob.symbols   	end