** module to handle bob's scooter logic*SCOOTMAXUP		EQU	-6	;gear upSCOOTMAXDOWN	EQU	6SCOOTMAXLEFT	EQU	-6SCOOTMAXRIGHT	EQU	6SCOOT2MAXUP		EQU	-4	;gear downSCOOT2MAXDOWN	EQU	4SCOOT2MAXLEFT	EQU	-4SCOOT2MAXRIGHT	EQU	4SCOOTYDECEL		EQU	7SCOOTXDECEL		EQU	7SCOOTYACCEL		EQU	7SCOOTXACCEL		EQU	7SCOOTXLEFT		EQU	-28SCOOTXRIGHT		EQU	28SCOOTYTOP		EQU	-20SCOOTYBOTTOM	EQU	20		** set performance variables*bobscooter:	lda	scooterwin	beq	@nowin	lda	#0	sta	Joy1Data+1@nowin:		lda	#SCOOTMAXUP	sta	temp	lda	#SCOOTMAXDOWN	sta	temp+1	lda	#SCOOTMAXLEFT	sta	temp+2	lda	#SCOOTMAXRIGHT	sta	temp+3	** first process any up/down movement*@process:	lda	bobbounce	beq	@notbounced2	dec	bobbounce	jmp	@checkx@notbounced2:	lda	Joy1Data+1			;is he trying to accel up	and	#JoyUp	beq	@nopushup	inc	accelflames	lda	cputime	and	#SCOOTYACCEL	cmp	#SCOOTYACCEL	bne	@checkx	lda	scootyspeed			;yes...only go so fast	cmp	temp	;#SCOOTMAXUP	beq	@checkx	dec	scootyspeed	bra	@checkx@nopushup:	lda	Joy1Data+1	and	#JoyDown	beq	@nopushdown	inc	accelflames	lda	cputime	and	#SCOOTYACCEL	cmp	#SCOOTYACCEL	bne	@checkx	lda	scootyspeed	cmp	temp+1	;#SCOOTMAXDOWN	beq	@checkx	inc	scootyspeed	bra	@checkx@nopushdown:	lda	cputime	and	#SCOOTYDECEL	cmp	#SCOOTYDECEL	bne	@checkx	lda	scootyspeed	beq	@checkx		bpl	@decit	inc	scootyspeed	bra	@checkx@decit:	dec	scootyspeed	** handle any accel/decel*@checkx:	lda	turncount	beq	@noturn** process turn around*	inc	geartimer	lda	geartimer	and	#3	cmp	#3	beq	@maketurn	jmp	@setrest@maketurn:	inc	turncount	lda	turncount	cmp	#3	bcs	@endturn	jmp	@setrest@endturn:	stz	turncount	stz	geartimer	lda	walkdir	bpl	@makepos	lda	#faceright	bra	@setdir@makepos:	lda	#faceleft@setdir:	sta	walkdir	jmp	@setrest	** not turning...process x and y movement*	@noturn:	lda	bobbounce	beq	@notbounced	dec	bobbounce	jmp	@setrest@notbounced:	lda	Joy1Data+1				and	#JoyLeft	beq	@nopushleft	lda	walkdir	bmi	@moveleft	lda	geartimer	bne	@setrest	inc	turncount	bra	@setrest@moveleft:	inc	accelflames	lda	cputime	and	#SCOOTXACCEL	cmp	#SCOOTXACCEL	bne	@setrest	lda	scootxspeed				cmp	temp+2	;#SCOOTMAXLEFT	beq	@setrest	dec	scootxspeed	bra	@setrest@nopushleft:	lda	Joy1Data+1	and	#JoyRight	beq	@nopushright	lda	walkdir	bpl	@moveright	lda	geartimer	bne	@setrest	inc	turncount	bra	@setrest@moveright:	inc	accelflames	lda	cputime	and	#SCOOTXACCEL	cmp	#SCOOTXACCEL	bne	@setrest	lda	scootxspeed	cmp	temp+3	;#SCOOTMAXRIGHT	beq	@setrest	inc	scootxspeed	bra	@setrest@nopushright:	lda	cputime	and	#SCOOTXDECEL	cmp	#SCOOTXDECEL	bne	@setrest	lda	scootxspeed	beq	@setrest		bpl	@decit2	inc	accelflames	inc	scootxspeed	bra	@setrest@decit2:	dec	scootxspeed	** handle rest of stuff*@setrest:	lda	scootxspeed	sta	bobxmove		lda	scootyspeed	sta	bobymove	rts